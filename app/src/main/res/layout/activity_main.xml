<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="#121212">

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical"
        android:padding="16dp">

        <!-- Заголовок и выбор режима -->
        <TextView
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:text="Продвинутый калькулятор"
            android:textColor="#FFFFFF"
            android:textSize="24sp"
            android:textStyle="bold"
            android:gravity="center"
            android:layout_marginBottom="16dp"/>

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:orientation="horizontal"
            android:layout_marginBottom="8dp">

            <TextView
                android:layout_width="0dp"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:text="Режим:"
                android:textColor="#FFFFFF"
                android:textSize="14sp"/>

            <Spinner
                android:id="@+id/operationTypeSpinner"
                android:layout_width="0dp"
                android:layout_height="wrap_content"
                android:layout_weight="2"
                android:background="#2D2D2D"
                android:popupBackground="#2D2D2D"/>
        </LinearLayout>

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:orientation="horizontal"
            android:layout_marginBottom="16dp">

            <TextView
                android:layout_width="0dp"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:text="Система:"
                android:textColor="#FFFFFF"
                android:textSize="14sp"/>

            <Spinner
                android:id="@+id/numberSystemSpinner"
                android:layout_width="0dp"
                android:layout_height="wrap_content"
                android:layout_weight="2"
                android:background="#2D2D2D"
                android:popupBackground="#2D2D2D"/>
        </LinearLayout>

        <!-- Дисплеи -->
        <EditText
            android:id="@+id/display"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:background="#2D2D2D"
            android:textColor="#FFFFFF"
            android:textSize="24sp"
            android:padding="12dp"
            android:editable="false"
            android:cursorVisible="false"
            android:layout_marginBottom="8dp"/>

        <TextView
            android:id="@+id/resultDisplay"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:background="#2D2D2D"
            android:textColor="#4CAF50"
            android:textSize="20sp"
            android:padding="12dp"
            android:layout_marginBottom="16dp"/>

        <!-- Основная клавиатура -->
        <GridLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:columnCount="5"
            android:rowCount="8"
            android:layout_marginBottom="16dp">

            <!-- Первый ряд: функции -->
            <Button android:id="@+id/btnSin" android:text="sin" style="@style/FunctionButton"/>
            <Button android:id="@+id/btnCos" android:text="cos" style="@style/FunctionButton"/>
            <Button android:id="@+id/btnTan" android:text="tan" style="@style/FunctionButton"/>
            <Button android:id="@+id/btnLog" android:text="log" style="@style/FunctionButton"/>
            <Button android:id="@+id/btnLn" android:text="ln" style="@style/FunctionButton"/>

            <!-- Второй ряд: функции и константы -->
            <Button android:id="@+id/btnSqrt" android:text="√" style="@style/FunctionButton"/>
            <Button android:id="@+id/btnPower" android:text="^" style="@style/FunctionButton"/>
            <Button android:id="@+id/btnPi" android:text="π" style="@style/FunctionButton"/>
            <Button android:id="@+id/btnEuler" android:text="e" style="@style/FunctionButton"/>
            <Button android:id="@+id/btnMode" android:text="D/R" style="@style/FunctionButton"/>

            <!-- Третий ряд: управление -->
            <Button android:id="@+id/btnClear" android:text="C" style="@style/ControlButton"/>
            <Button android:id="@+id/btnBackspace" android:text="⌫" style="@style/ControlButton"/>
            <Button android:id="@+id/btnOpenBracket" android:text="(" style="@style/FunctionButton"/>
            <Button android:id="@+id/btnCloseBracket" android:text=")" style="@style/FunctionButton"/>
            <Button android:id="@+id/btnConvert" android:text="Conv" style="@style/ControlButton"/>

            <!-- Четвертый ряд: побитовые операции -->
            <Button android:id="@+id/btnAnd" android:text="AND" style="@style/BitwiseButton"/>
            <Button android:id="@+id/btnOr" android:text="OR" style="@style/BitwiseButton"/>
            <Button android:id="@+id/btnXor" android:text="XOR" style="@style/BitwiseButton"/>
            <Button android:id="@+id/btnNot" android:text="NOT" style="@style/BitwiseButton"/>
            <Button android:id="@+id/btnShiftLeft" android:text="≪" style="@style/BitwiseButton"/>

            <!-- Пятый ряд: цифры 7-9 и операции -->
            <Button android:id="@+id/btn7" android:text="7" style="@style/NumberButton"/>
            <Button android:id="@+id/btn8" android:text="8" style="@style/NumberButton"/>
            <Button android:id="@+id/btn9" android:text="9" style="@style/NumberButton"/>
            <Button android:id="@+id/btnDivide" android:text="/" style="@style/OperationButton"/>
            <Button android:id="@+id/btnShiftRight" android:text="≫" style="@style/BitwiseButton"/>

            <!-- Шестой ряд: цифры 4-6 и операции -->
            <Button android:id="@+id/btn4" android:text="4" style="@style/NumberButton"/>
            <Button android:id="@+id/btn5" android:text="5" style="@style/NumberButton"/>
            <Button android:id="@+id/btn6" android:text="6" style="@style/NumberButton"/>
            <Button android:id="@+id/btnMultiply" android:text="×" style="@style/OperationButton"/>
            <Button android:id="@+id/btnEquals" android:text="=" style="@style/EqualsButton"/>

            <!-- Седьмой ряд: цифры 1-3, минус и интеграл -->
            <Button android:id="@+id/btn1" android:text="1" style="@style/NumberButton"/>
            <Button android:id="@+id/btn2" android:text="2" style="@style/NumberButton"/>
            <Button android:id="@+id/btn3" android:text="3" style="@style/NumberButton"/>
            <Button android:id="@+id/btnSubtract" android:text="-" style="@style/OperationButton"/>
            <Button android:id="@+id/btnAdd" android:text="+" style="@style/OperationButton"/>


            <!-- Восьмой ряд: 0, точка и сложение -->
            <Button android:id="@+id/btnIntegral" android:text="∫" style="@style/FunctionButton"/>
            <Button android:id="@+id/btn0" android:text="0" style="@style/NumberButton"
                android:layout_columnSpan="2" android:layout_width="0dp"/>
            <Button android:id="@+id/btnDot" android:text="." style="@style/NumberButton"/>


            <!-- Девятый ряд: HEX буквы A-F -->
            <Button android:id="@+id/btnHexA" android:text="A" style="@style/HexButton"/>
            <Button android:id="@+id/btnHexB" android:text="B" style="@style/HexButton"/>
            <Button android:id="@+id/btnHexC" android:text="C" style="@style/HexButton"/>
            <Button android:id="@+id/btnHexD" android:text="D" style="@style/HexButton"/>
            <Button android:id="@+id/btnHexE" android:text="E" style="@style/HexButton"/>
            <Button android:id="@+id/btnHexF" android:text="F" style="@style/HexButton"/>

        </GridLayout>

        <!-- История вычислений -->
        <TextView
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:text="История:"
            android:textColor="#FFFFFF"
            android:textSize="16sp"
            android:layout_marginTop="16dp"/>

        <TextView
            android:id="@+id/historyDisplay"
            android:layout_width="match_parent"
            android:layout_height="150dp"
            android:background="#2D2D2D"
            android:textColor="#AAAAAA"
            android:textSize="14sp"
            android:padding="12dp"
            android:scrollbars="vertical"/>

    </LinearLayout>
</ScrollView>